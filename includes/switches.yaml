switch:
  - platform: template
    switches:

      projector:
        friendly_name: projector
        icon_template: mdi:projector
        value_template: "{{ is_state('input_boolean.projector', 'on') }}"
        turn_on:
          - condition: state
            entity_id: input_boolean.projector
            state: "off"
          - service: input_boolean.turn_on
            data:
              entity_id: input_boolean.projector
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: projector
              command: on
        turn_off:
          - condition: state
            entity_id: input_boolean.projector
            state: "on"
          - service: input_boolean.turn_off
            data:
              entity_id: input_boolean.projector
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: projector
              command: off
          - delay: 00:00:02
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: projector
              command: off

      stereo:
        friendly_name: Stereo
        icon_template: mdi:speaker
        value_template: "{{ is_state('input_boolean.stereo', 'on') }}"
        turn_on:
          - condition: state
            entity_id: input_boolean.stereo
            state: "off"
          - service: input_boolean.turn_on
            data:
              entity_id: input_boolean.stereo
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: stereo
              command: amp-power
        turn_off:
          - condition: state
            entity_id: input_boolean.stereo
            state: "on"
          - service: input_boolean.turn_off
            data:
              entity_id: input_boolean.stereo
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: stereo
              command: amp-power

      scene_music:
        friendly_name: Music
        icon_template: mdi:music
        value_template: "{{ is_state('input_boolean.music', 'on') }}"
        turn_off:
          - condition: state
            entity_id: input_boolean.music
            state: "on"
          - service: input_boolean.turn_off
            data:
              entity_id: input_boolean.music
          - service: switch.turn_off
            entity_id: switch.stereo
          - service: media_player.turn_off
            entity_id: media_player.stereo
        turn_on:
          - condition: state
            entity_id: input_boolean.music
            state: "off"
          - service: input_boolean.turn_on
            data:
              entity_id: input_boolean.music
          - service: switch.turn_on
            entity_id: switch.stereo
          - delay: 00:00:01
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: stereo
              command: cd
          - service: script.normalize_volume

      scene_dining:
        friendly_name: Dining
        icon_template: mdi:silverware-variant
        value_template: false
        turn_off:
        turn_on:
          - service: script.turn_on_scene
            data:
              entity: dining

      scene_cinema:
        friendly_name: Cinema
        icon_template: mdi:movie-open
        value_template: "{{ is_state('input_boolean.projector', 'on') }}"
        turn_off:
          - service: switch.turn_off
            entity_id: switch.stereo
          - service: switch.turn_off
            entity_id: switch.projector
        turn_on:
          - service: switch.turn_on
            entity_id: switch.stereo
          - service: switch.turn_on
            entity_id: switch.projector
          - delay: 00:00:01
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: stereo
              command: tuner
          - service: script.normalize_volume
          - service: script.turn_on_scene
            data:
              entity: cinema

      scene_romantic:
        friendly_name: Romantic
        icon_template: mdi:cards-heart
        value_template: false
        turn_off:
        turn_on:
          - service: script.turn_on_scene
            data:
              entity: romantic

      scene_work:
        friendly_name: Work
        icon_template: mdi:weather-sunny
        value_template: false
        turn_off:
        turn_on:
          - service: script.turn_on_scene
            data:
              entity: work

      scene_bath:
        friendly_name: Bath
        icon_template: mdi:hot-tub
        value_template: "{{ is_state('input_boolean.bath', 'on') }}"
        turn_off:
          - condition: state
            entity_id: input_boolean.bath
            state: "on"
          - service: input_boolean.turn_off
            data:
              entity_id: input_boolean.bath
          - service: switch.turn_off
            entity_id: switch.stereo
          - service: media_player.turn_off
            entity_id: media_player.stereo
        turn_on:
          - condition: state
            entity_id: input_boolean.bath
            state: "off"
          - service: input_boolean.turn_on
            data:
              entity_id: input_boolean.bath
          - service: script.turn_on_scene
            data:
              entity: bath
          - service: spotcast.start
            data:
              uri: !secret bath_playlist
              random_song: true
              shuffle: true
              start_volume: 50
              entity_id: media_player.stereo
          - service: switch.turn_on
            entity_id: switch.stereo
          - delay: 00:00:01
          - service: remote.send_command
            target:
              entity_id: remote.ir_blaster_remote
            data:
              device: stereo
              command: cd
          - service: script.normalize_volume

      scene_off:
        friendly_name: "Off"
        icon_template: mdi:eye-off
        value_template: false
        turn_off:
        turn_on:
          - service: switch.turn_off
            entity_id: switch.stereo
          - service: switch.turn_off
            entity_id: switch.projector
          - service: media_player.turn_off
            entity_id: media_player.stereo
          - service: script.turn_on_scene
            data:
              entity: "off"
          